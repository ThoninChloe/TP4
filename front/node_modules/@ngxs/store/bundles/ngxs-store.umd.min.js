!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@ngxs/store/internals"),require("@angular/common"),require("rxjs"),require("rxjs/operators")):"function"==typeof define&&define.amd?define("@ngxs/store",["exports","@angular/core","@ngxs/store/internals","@angular/common","rxjs","rxjs/operators"],e):e(((t=t||self).ngxs=t.ngxs||{},t.ngxs.store={}),t.ng.core,t.ngxs.store.internals,t.ng.common,t.rxjs,t.rxjs.operators)}(this,function(t,e,n,r,o,i){"use strict";var a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function u(t,e){function n(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var s=function(){return(s=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};function c(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}function p(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(u){o={error:u}}finally{try{r&&!r.done&&(n=i["return"])&&n.call(i)}finally{if(o)throw o.error}}return a}function f(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(p(arguments[e]));return t}var l=function(){function t(t,e){this._ngZone=t,this._platformId=e,this.verifyZoneIsNotNooped(this._ngZone)}return t.prototype.enter=function(t){return r.isPlatformServer(this._platformId)?this.runInsideAngular(t):this.runOutsideAngular(t)},t.prototype.leave=function(t){return this.runInsideAngular(t)},t.prototype.runInsideAngular=function(t){return e.NgZone.isInAngularZone()?t():this._ngZone.run(t)},t.prototype.runOutsideAngular=function(t){return e.NgZone.isInAngularZone()?this._ngZone.runOutsideAngular(t):t()},t.prototype.verifyZoneIsNotNooped=function(t){},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:e.NgZone},{type:String,decorators:[{type:e.Inject,args:[e.PLATFORM_ID]}]}]},t}(),h=new e.InjectionToken("ROOT_STATE_TOKEN"),y=new e.InjectionToken("FEATURE_STATE_TOKEN"),d=new e.InjectionToken("NGXS_PLUGINS"),g=new e.InjectionToken("NG_TEST_MODE"),S=new e.InjectionToken("NG_DEV_MODE"),v="NGXS_META",O="NGXS_OPTIONS_META",_="NGXS_SELECTOR_META",E=function(){function t(){this.defaultsState={},this.selectorOptions={injectContainerState:!0,suppressErrors:!0},this.compatibility={strictContentSecurityPolicy:!1},this.executionStrategy=l}return t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[]},t}(),T=new e.InjectionToken("NGXS_EXECUTION_STRATEGY");function m(t){if(!t.hasOwnProperty(v)){Object.defineProperty(t,v,{value:{name:null,actions:{},defaults:{},path:null,selectFromAppState:null,children:[],instance:null}})}return A(t)}function A(t){return t[v]}var N={},I=function(t){return t}({get:function(){return N},set:function(t){N=s({},t)}});function b(t){if(!t.hasOwnProperty(_)){Object.defineProperty(t,_,{value:{selectFromAppState:null,originalFn:null,containerClass:null,selectorName:null,getSelectorOptions:function(){return{}}}})}return C(t)}function C(t){return t[_]}function R(t,e){return e&&e.compatibility&&e.compatibility.strictContentSecurityPolicy?function(t){var e=t.slice();return function(t){return e.reduce(function(t,e){return t&&t[e]},t)}}(t):function(t){for(var e=t,n="store."+e[0],r=0,o=e.length,i=n;++r<o;)i=i+" && "+(n=n+"."+e[r]);return new Function("store","return "+i+";")}(t)}function x(t){return t.constructor&&t.constructor.type?t.constructor.type:t.type}var P=function(t,e,n){t=s({},t);var r=e.split("."),o=r.length-1;return r.reduce(function(t,e,r){return t[e]=r===o?n:Array.isArray(t[e])?t[e].slice():s({},t[e]),t&&t[e]},t),t},M=function(t,e){return e.split(".").reduce(function(t,e){return t&&t[e]},t)};function j(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return w(t,["DISPATCHED"])}function w(t,e,n){void 0===n&&(n=F);var r=t.reduce(function(t,e){return t[x(e)]=!0,t},{}),o=e&&function(t){return t.reduce(function(t,e){return t[e]=!0,t},{})}(e);return function(t){return t.pipe(function(t,e){return i.filter(function(n){var r=x(n.action),o=t[r],i=!e||e[n.status];return o&&i})}(r,o),n())}}function D(){return i.map(function(t){var e=t.action,n=t.status;return{action:e,result:{successful:"SUCCESSFUL"===n,canceled:"CANCELED"===n,error:t.error}}})}function F(){return i.map(function(t){return t.action})}var k=function(){function t(t){this._executionStrategy=t}return t.prototype.enter=function(t){return this._executionStrategy.enter(t)},t.prototype.leave=function(t){return this._executionStrategy.leave(t)},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:undefined,decorators:[{type:e.Inject,args:[T]}]}]},t}();function L(t){return function(e){return new o.Observable(function(n){return e.subscribe({next:function(e){t.leave(function(){return n.next(e)})},error:function(e){t.leave(function(){return n.error(e)})},complete:function(){t.leave(function(){return n.complete()})}})})}}var U,B=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._itemQueue=[],e._busyPushingNext=!1,e}return u(e,t),e.prototype.next=function(e){if(this._busyPushingNext)this._itemQueue.unshift(e);else{for(this._busyPushingNext=!0,t.prototype.next.call(this,e);this._itemQueue.length>0;){var n=this._itemQueue.pop();t.prototype.next.call(this,n)}this._busyPushingNext=!1}},e}(o.Subject),V=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return u(n,t),n.decorators=[{type:e.Injectable}],n}(B),H=function(t){function n(e,n){return t.call(this,function(t){e.pipe(L(n)).subscribe(function(e){return t.next(e)},function(e){return t.error(e)},function(){return t.complete()})})||this}return u(n,t),n.decorators=[{type:e.Injectable}],n.ctorParameters=function(){return[{type:V},{type:k}]},n}(o.Observable),G=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=t.shift();return r.apply(void 0,f(e,[function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return G(t).apply(void 0,f(e))}]))}},Z=function(t){function n(){return t.call(this,{})||this}return u(n,t),n.decorators=[{type:e.Injectable}],n.ctorParameters=function(){return[]},n}(o.BehaviorSubject),Y=function(){function t(t,e){this._parentManager=t,this._pluginHandlers=e,this.plugins=[],this.registerHandlers()}return t.prototype.registerHandlers=function(){this.plugins=this.getPlugins(),this.registerPluginInManager(this.plugins)},t.prototype.registerPluginInManager=function(t){var e;this._parentManager&&(e=this._parentManager.plugins).push.apply(e,f(t))},t.prototype.getPlugins=function(){return(this._pluginHandlers||[]).map(function(t){return t.handle?t.handle.bind(t):t})},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:t,decorators:[{type:e.Optional},{type:e.SkipSelf}]},{type:Array,decorators:[{type:e.Inject,args:[d]},{type:e.Optional}]}]},t}(),X=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return u(n,t),n.decorators=[{type:e.Injectable}],n}(o.Subject),q=function(){function t(t,e,n,r,o,i){this._errorHandler=t,this._actions=e,this._actionResults=n,this._pluginManager=r,this._stateStream=o,this._ngxsExecutionStrategy=i}return t.prototype.dispatch=function(t){var e=this,n=this._ngxsExecutionStrategy.enter(function(){return e.dispatchByEvents(t)});return n.subscribe({error:function(t){return e._ngxsExecutionStrategy.leave(function(){return e._errorHandler.handleError(t)})}}),n.pipe(L(this._ngxsExecutionStrategy))},t.prototype.dispatchByEvents=function(t){var e=this;return Array.isArray(t)?o.forkJoin(t.map(function(t){return e.dispatchSingle(t)})):this.dispatchSingle(t)},t.prototype.dispatchSingle=function(t){var e=this,n=this._stateStream.getValue(),r=this._pluginManager.plugins;return G(f(r,[function(t,r){t!==n&&e._stateStream.next(t);var o=e.getActionResultStream(r);return o.subscribe(function(t){return e._actions.next(t)}),e._actions.next({action:r,status:"DISPATCHED"}),e.createDispatchObservable(o)}]))(n,t).pipe(i.shareReplay())},t.prototype.getActionResultStream=function(t){return this._actionResults.pipe(i.filter(function(e){return e.action===t&&"DISPATCHED"!==e.status}),i.take(1),i.shareReplay())},t.prototype.createDispatchObservable=function(t){var e=this;return t.pipe(i.exhaustMap(function(t){switch(t.status){case"SUCCESSFUL":return o.of(e._stateStream.getValue());case"ERRORED":return o.throwError(t.error);default:return o.EMPTY}})).pipe(i.shareReplay())},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:e.ErrorHandler},{type:V},{type:X},{type:Y},{type:Z},{type:k}]},t}(),Q=function(t){Object.freeze(t);var e="function"==typeof t,n=Object.prototype.hasOwnProperty;return Object.getOwnPropertyNames(t).forEach(function(r){!n.call(t,r)||e&&("caller"===r||"callee"===r||"arguments"===r)||null===t[r]||"object"!=typeof t[r]&&"function"!=typeof t[r]||Object.isFrozen(t[r])||Q(t[r])}),t},z={STATE_NAME:"STATE_NAME",STATE_UNIQUE:"STATE_UNIQUE",STATE_NAME_PROPERTY:"STATE_NAME_PROPERTY",STATE_DECORATOR:"STATE_DECORATOR",INCORRECT_PRODUCTION:"INCORRECT_PRODUCTION",INCORRECT_DEVELOPMENT:"INCORRECT_DEVELOPMENT",SELECT_FACTORY_NOT_CONNECTED:"SELECT_FACTORY_NOT_CONNECTED",ACTION_DECORATOR:"ACTION_DECORATOR",SELECTOR_DECORATOR:"SELECTOR_DECORATOR"},K=((U={})[z.STATE_NAME]=function(t){return t+" is not a valid state name. It needs to be a valid object property name."},U[z.STATE_NAME_PROPERTY]=function(){return"States must register a 'name' property"},U[z.STATE_UNIQUE]=function(t,e,n){return"State name '"+t+"' from "+e+" already exists in "+n},U[z.STATE_DECORATOR]=function(){return"States must be decorated with @State() decorator"},U[z.INCORRECT_PRODUCTION]=function(){return"Angular is running in production mode but NGXS is still running in the development mode!\nPlease set developmentMode to false on the NgxsModule options when in production mode.\nNgxsModule.forRoot(states, { developmentMode: !environment.production })"},U[z.INCORRECT_DEVELOPMENT]=function(){return"RECOMMENDATION: Set developmentMode to true on the NgxsModule when Angular is running in development mode.\nNgxsModule.forRoot(states, { developmentMode: !environment.production })"},U[z.SELECT_FACTORY_NOT_CONNECTED]=function(){return"SelectFactory not connected to store!"},U[z.ACTION_DECORATOR]=function(){return"@Action() decorator cannot be used with static methods"},U[z.SELECTOR_DECORATOR]=function(){return"Selectors only work on methods"},U),W=function(){function t(t,e){this.isTestMode=t,this.isDevMode=e}return t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:undefined,decorators:[{type:e.Inject,args:[S]}]},{type:undefined,decorators:[{type:e.Inject,args:[g]}]}]},t}(),J=function(){function t(t,e){this._host=t,this._config=e}return Object.defineProperty(t.prototype,"isIncorrectProduction",{get:function(){return!this._host.isDevMode()&&this._config.developmentMode},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isIncorrectDevelopment",{get:function(){return this._host.isDevMode()&&!this._config.developmentMode},enumerable:!0,configurable:!0}),t.prototype.verifyDevMode=function(){this._host.isTestMode()||(this.isIncorrectProduction?console.warn(K[z.INCORRECT_PRODUCTION]()):this.isIncorrectDevelopment&&console.warn(K[z.INCORRECT_DEVELOPMENT]()))},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:W},{type:E}]},t}(),$=function(){function t(t,e,n,r){this._stateStream=t,this._dispatcher=e,this._config=n,r.verifyDevMode()}return t.prototype.getRootStateOperations=function(){var t=this,e={getState:function(){return t._stateStream.getValue()},setState:function(e){return t._stateStream.next(e)},dispatch:function(e){return t._dispatcher.dispatch(e)}};return this._config.developmentMode?this.ensureStateAndActionsAreImmutable(e):e},t.prototype.ensureStateAndActionsAreImmutable=function(t){return{getState:function(){return t.getState()},setState:function(e){var n=Q(e);return t.setState(n)},dispatch:function(e){return t.dispatch(e)}}},t.prototype.setStateToTheCurrentWithNew=function(t){var e=this.getRootStateOperations(),n=e.getState();e.setState(s({},n,t.defaults))},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:Z},{type:q},{type:E},{type:J}]},t}();var tt=function(){function t(t){this._internalStateOperations=t}return t.prototype.createStateContext=function(t){var e=this._internalStateOperations.getRootStateOperations();function n(e){return M(e,t.depth)}function r(n,r){var o=P(n,t.depth,r);return e.setState(o),o}function o(t,e){return r(t,e(n(t)))}return{getState:function(){return n(e.getState())},patchState:function(t){return o(e.getState(),function(t){return function(e){var n=Array.isArray(t),r="object"!=typeof t;if(n)throw new Error("Patching arrays is not supported.");if(r)throw new Error("Patching primitives is not supported.");var o=s({},e);for(var i in t)o[i]=t[i];return o}}(t))},setState:function(t){var n=e.getState();return"function"==typeof t?o(n,t):r(n,t)},dispatch:function(t){return e.dispatch(t)}}},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:$}]},t}(),et=function(){function t(){}return t.stateNameErrorMessage=function(t){return K[z.STATE_NAME](t)},t.checkCorrectStateName=function(t){if(!t)throw new Error(K[z.STATE_NAME_PROPERTY]());if(!this.stateNameRegex.test(t))throw new Error(this.stateNameErrorMessage(t))},t.checkStateNameIsUnique=function(t,e){var n=this.getValidStateMeta(t).name,r=e[n];if(r&&r!==t)throw new Error(K[z.STATE_UNIQUE](n,t.name,r.name));return n},t.getValidStateMeta=function(t){var e=A(t);if(!e)throw new Error(K[z.STATE_DECORATOR]());return e},t.stateNameRegex=new RegExp("^[a-zA-Z0-9_]+$"),t}(),nt=function(){function t(t,e,n,r,o,i,a){this._injector=t,this._config=e,this._parentFactory=n,this._actions=r,this._actionResults=o,this._stateContextFactory=i,this._initialState=a,this._connected=!1,this._states=[],this._statesByName={}}return Object.defineProperty(t.prototype,"states",{get:function(){return this._parentFactory?this._parentFactory.states:this._states},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"statesByName",{get:function(){return this._parentFactory?this._parentFactory.statesByName:this._statesByName},enumerable:!0,configurable:!0}),t.cloneDefaults=function(t){var e,n={};return Array.isArray(t)?n=t.slice():n="object"==typeof(e=t)&&null!==e||"function"==typeof e?s({},t):t===undefined?{}:t,n},t.checkStatesAreValid=function(t){t.forEach(et.getValidStateMeta)},t.prototype.add=function(e){var n,r;t.checkStatesAreValid(e);var o=this.addToStatesMap(e).newStates;if(!o.length)return[];var i,a,u,s,p=function(t){var e=function(e){var n=t.find(function(t){return t===e});if(!n)throw new Error("Child state not found: "+e+". \r\nYou may have forgotten to add states to module");return n[v].name};return t.reduce(function(t,n){var r=n[v],o=r.name,i=r.children;return t[o]=(i||[]).map(e),t},{})}(o),f=(i=p,a=[],u={},s=function(t,e){void 0===e&&(e=[]),Array.isArray(e)||(e=[]),e.push(t),u[t]=!0,i[t].forEach(function(n){if(e.indexOf(n)>=0)throw new Error("Circular dependency '"+n+"' is required by '"+t+"': "+e.join(" -> "));u[n]||s(n,e.slice(0))}),a.indexOf(t)<0&&a.push(t)},Object.keys(i).forEach(function(t){return s(t)}),a.reverse()),l=function(t,e){void 0===e&&(e={});var n=function(t,e){for(var r in t)if(t.hasOwnProperty(r)&&t[r].indexOf(e)>=0){var o=n(t,r);return null!==o?o+"."+r:r}return null};for(var r in t)if(t.hasOwnProperty(r)){var o=n(t,r);e[r]=o?o+"."+r:r}return e}(p),h=o.reduce(function(t,e){return t[e[v].name]=e,t},{}),y=[];try{for(var d=c(f),g=d.next();!g.done;g=d.next()){var S=g.value,O=h[S],_=l[S],E=O[v];this.addRuntimeInfoToMeta(E,_);var T={name:S,depth:_,actions:E.actions,instance:this._injector.get(O),defaults:t.cloneDefaults(E.defaults)};this.hasBeenMountedAndBootstrapped(S,_)||y.push(T),this.states.push(T)}}catch(m){n={error:m}}finally{try{g&&!g.done&&(r=d["return"])&&r.call(d)}finally{if(n)throw n.error}}return y},t.prototype.addAndReturnDefaults=function(t){var e=t||[],n=this.add(e);return{defaults:n.reduce(function(t,e){return P(t,e.depth,e.defaults)},{}),states:n}},t.prototype.connectActionHandlers=function(){var t=this;this._connected||(this._actions.pipe(i.filter(function(t){return"DISPATCHED"===t.status}),i.mergeMap(function(e){var n=e.action;return t.invokeActions(t._actions,n).pipe(i.map(function(){return{action:n,status:"SUCCESSFUL"}}),i.defaultIfEmpty({action:n,status:"CANCELED"}),i.catchError(function(t){return o.of({action:n,status:"ERRORED",error:t})}))})).subscribe(function(e){return t._actionResults.next(e)}),this._connected=!0)},t.prototype.invokeActions=function(t,e){var n,r,a,u,s=[];try{for(var p=c(this.states),f=p.next();!f.done;f=p.next()){var l=f.value,h=x(e),y=l.actions[h];if(y)try{for(var d=c(y),g=d.next();!g.done;g=d.next()){var S=g.value,v=this._stateContextFactory.createStateContext(l);try{var O=l.instance[S.fn](v,e);O instanceof Promise&&(O=o.from(O)),O instanceof o.Observable?S.options.cancelUncompleted&&(O=O.pipe(i.takeUntil(t.pipe(j(e))))):O=o.of({}).pipe(i.shareReplay()),s.push(O)}catch(_){s.push(o.throwError(_))}}}catch(E){a={error:E}}finally{try{g&&!g.done&&(u=d["return"])&&u.call(d)}finally{if(a)throw a.error}}}}catch(T){n={error:T}}finally{try{f&&!f.done&&(r=p["return"])&&r.call(p)}finally{if(n)throw n.error}}return s.length||s.push(o.of({})),o.forkJoin(s)},t.prototype.addToStatesMap=function(t){var e,n,r=[],o=this.statesByName;try{for(var i=c(t),a=i.next();!a.done;a=i.next()){var u=a.value,s=et.checkStateNameIsUnique(u,o);!o[s]&&(r.push(u),o[s]=u)}}catch(p){e={error:p}}finally{try{a&&!a.done&&(n=i["return"])&&n.call(i)}finally{if(e)throw e.error}}return{newStates:r}},t.prototype.addRuntimeInfoToMeta=function(t,e){t.path=e,t.selectFromAppState=R(e.split("."),this._config)},t.prototype.hasBeenMountedAndBootstrapped=function(t,e){var n=M(this._initialState,e)!==undefined;return this.statesByName[t]&&n},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:e.Injector},{type:E},{type:t,decorators:[{type:e.Optional},{type:e.SkipSelf}]},{type:V},{type:X},{type:tt},{type:undefined,decorators:[{type:e.Optional},{type:e.Inject,args:[n.INITIAL_STATE_TOKEN]}]}]},t}(),rt=function(){function t(t,e,n){this.internalStateOperations=t,this.stateContextFactory=e,this.bootstrapper=n}return t.prototype.ngxsBootstrap=function(t,e){var n=this;this.internalStateOperations.getRootStateOperations().dispatch(t).pipe(i.filter(function(){return!!e}),i.tap(function(){return n.invokeInit(e.states)}),i.mergeMap(function(){return n.bootstrapper.appBootstrapped$}),i.filter(function(t){return!!t})).subscribe(function(){n.invokeBootstrap(e.states)})},t.prototype.invokeInit=function(t){this.invokeLifecycleHooks(t,"ngxsOnInit")},t.prototype.invokeBootstrap=function(t){this.invokeLifecycleHooks(t,"ngxsAfterBootstrap")},t.prototype.invokeLifecycleHooks=function(t,e){var n,r;try{for(var o=c(t),i=o.next();!i.done;i=o.next()){var a=i.value,u=a.instance;if(u[e]){var s=this.stateContextFactory.createStateContext(a);u[e](s)}}}catch(p){n={error:p}}finally{try{i&&!i.done&&(r=o["return"])&&r.call(o)}finally{if(n)throw n.error}}},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:$},{type:tt},{type:n.NgxsBootstrapper}]},t}(),ot={getOptions:function(t){return t&&t.NGXS_SELECTOR_OPTIONS_META||{}},defineOptions:function(t,e){t&&(t.NGXS_SELECTOR_OPTIONS_META=e)}};function it(t,e,r){var o,i=r&&r.containerClass,a=n.memoize(function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var o=e.apply(i,t);if(o instanceof Function){var a=n.memoize.apply(null,[o]);return a}return o}),u=function(t,e,n){var r=b(t);r.originalFn=e;var o=function(){return{}};n&&(r.containerClass=n.containerClass,r.selectorName=n.selectorName,o=n.getSelectorOptions||o);var i=s({},r);return r.getSelectorOptions=function(){return function(t,e){return s({},I.get(),ot.getOptions(t.containerClass)||{},ot.getOptions(t.originalFn)||{},t.getSelectorOptions()||{},e)}(i,o())},r}(a,e,r);return u.selectFromAppState=function(e){var n=[],r=(o=o||function(t,e){void 0===e&&(e=[]);var n=t.getSelectorOptions(),r=function(t,e){void 0===e&&(e=[]);var n=[],r=0===e.length||t.getSelectorOptions().injectContainerState,o=t.containerClass;if(o&&r){var i=A(o);i&&n.push(o)}return e&&n.push.apply(n,f(e)),n}(t,e).map(function(t){return at(t)});return{selectorOptions:n,argumentSelectorFunctions:r}}(u,t)).selectorOptions.suppressErrors,i=o.argumentSelectorFunctions;n.push.apply(n,f(i.map(function(t){return t(e)})));try{return a.apply(void 0,f(n))}catch(s){if(s instanceof TypeError&&r)return undefined;throw s}},a}function at(t){var e=C(t)||A(t);return e&&e.selectFromAppState||t}var ut=function(){function t(t,e,n,r,o){this._stateStream=t,this._internalStateOperations=e,this._config=n,this._internalExecutionStrategy=r,this.initStateStream(o)}return t.prototype.dispatch=function(t){return this._internalStateOperations.getRootStateOperations().dispatch(t)},t.prototype.select=function(t){var e=this,n=at(t);return this._stateStream.pipe(i.map(n),i.catchError(function(t){var n=e._config.selectorOptions.suppressErrors;return t instanceof TypeError&&n?o.of(undefined):o.throwError(t)}),i.distinctUntilChanged(),L(this._internalExecutionStrategy))},t.prototype.selectOnce=function(t){return this.select(t).pipe(i.take(1))},t.prototype.selectSnapshot=function(t){return at(t)(this._stateStream.getValue())},t.prototype.subscribe=function(t){return this._stateStream.pipe(L(this._internalExecutionStrategy)).subscribe(t)},t.prototype.snapshot=function(){return this._internalStateOperations.getRootStateOperations().getState()},t.prototype.reset=function(t){return this._internalStateOperations.getRootStateOperations().setState(t)},t.prototype.initStateStream=function(t){var e=this._stateStream.value;if(!e||0===Object.keys(e).length){var r=Object.keys(this._config.defaultsState).length>0?n.ObjectUtils.merge(this._config.defaultsState,t):t;this._stateStream.next(r)}},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:Z},{type:$},{type:E},{type:k},{type:undefined,decorators:[{type:e.Optional},{type:e.Inject,args:[n.INITIAL_STATE_TOKEN]}]}]},t}(),st=function(){function t(e,n){t.store=e,t.config=n}return t.store=null,t.config=null,t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:ut},{type:E}]},t}(),ct=function(){function t(){}return Object.defineProperty(t,"type",{get:function(){return"@@INIT"},enumerable:!0,configurable:!0}),t}(),pt=function(){function t(t){this.addedStates=t}return Object.defineProperty(t,"type",{get:function(){return"@@UPDATE_STATE"},enumerable:!0,configurable:!0}),t}(),ft=function(){function t(t,e,n,r,o,i,a){void 0===o&&(o=[]),I.set(i.selectorOptions||{});var u=t.addAndReturnDefaults(o);e.setStateToTheCurrentWithNew(u),t.connectActionHandlers(),a.ngxsBootstrap(new ct,u)}return t.decorators=[{type:e.NgModule}],t.ctorParameters=function(){return[{type:nt},{type:$},{type:ut},{type:st},{type:Array,decorators:[{type:e.Optional},{type:e.Inject,args:[h]}]},{type:E},{type:rt}]},t}(),lt=function(){function t(e,n,r,o,i){void 0===o&&(o=[]);var a=t.flattenStates(o),u=r.addAndReturnDefaults(a);u.states.length&&(n.setStateToTheCurrentWithNew(u),i.ngxsBootstrap(new pt(u.defaults),u))}return t.flattenStates=function(t){return void 0===t&&(t=[]),t.reduce(function(t,e){return t.concat(e)},[])},t.decorators=[{type:e.NgModule}],t.ctorParameters=function(){return[{type:ut},{type:$},{type:nt},{type:Array,decorators:[{type:e.Optional},{type:e.Inject,args:[y]}]},{type:rt}]},t}(),ht=function(){function t(){}return t.forRoot=function(e,r){return void 0===e&&(e=[]),void 0===r&&(r={}),{ngModule:ft,providers:f([nt,tt,H,V,n.NgxsBootstrapper,J,W,rt,q,X,$,k,ut,Z,st,Y],e,t.ngxsTokenProviders(e,r))}},t.forFeature=function(t){return void 0===t&&(t=[]),{ngModule:lt,providers:f([nt,Y],t,[{provide:y,multi:!0,useValue:t}])}},t.ngxsTokenProviders=function(r,o){return[{provide:S,useFactory:t.isAngularInTestMode},{provide:g,useFactory:t.isAngularDevMode},{provide:T,useClass:o.executionStrategy||l},{provide:h,useValue:r},{provide:t.ROOT_OPTIONS,useValue:o},{provide:E,useFactory:t.ngxsConfigFactory,deps:[t.ROOT_OPTIONS]},{provide:e.APP_BOOTSTRAP_LISTENER,useFactory:t.appBootstrapListenerFactory,multi:!0,deps:[n.NgxsBootstrapper]},{provide:n.INITIAL_STATE_TOKEN,useFactory:t.getInitialState}]},t.ngxsConfigFactory=function(t){return Object.assign(new E,t)},t.appBootstrapListenerFactory=function(t){return function(){return t.bootstrap()}},t.isAngularInTestMode=function(){return function(){return n.isAngularInTestMode()}},t.isAngularDevMode=function(){return function(){return e.isDevMode()}},t.getInitialState=function(){return n.InitialState.pop()},t.ROOT_OPTIONS=new e.InjectionToken("ROOT_OPTIONS"),t.decorators=[{type:e.NgModule}],t}();var yt=36;function dt(t,e,n){return void 0===n&&(n=[]),"string"==typeof(e=e||function(t){var e=t.length-1;return t.charCodeAt(e)===yt?t.slice(0,e):t}(t))?R(n.length?f([e],n):e.split("."),st.config):e[v]&&e[v].path?R(e[v].path.split("."),st.config):e}var gt=function(){function t(){}return t.prototype.enter=function(t){return t()},t.prototype.leave=function(t){return t()},t.decorators=[{type:e.Injectable}],t}();t.Action=function(t,e){return function(n,r){var o,i;if(n.hasOwnProperty("prototype"))throw new Error(K[z.ACTION_DECORATOR]());var a=m(n.constructor);Array.isArray(t)||(t=[t]);try{for(var u=c(t),s=u.next();!s.done;s=u.next()){var p=s.value.type;a.actions[p]||(a.actions[p]=[]),a.actions[p].push({fn:r,options:e||{},type:p})}}catch(f){o={error:f}}finally{try{s&&!s.done&&(i=u["return"])&&i.call(u)}finally{if(o)throw o.error}}}},t.Actions=H,t.InitState=ct,t.NGXS_PLUGINS=d,t.NgxsModule=ht,t.NoopNgxsExecutionStrategy=gt,t.Select=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return function(n,r){var o,i=r.toString(),a="__"+i+"__selector",u=dt(i,t,e);Object.defineProperties(n,((o={})[a]={writable:!0,enumerable:!1,configurable:!0},o[i]={enumerable:!0,configurable:!0,get:function(){return this[a]||(this[a]=function(t){if(!st.store)throw new Error(K[z.SELECT_FACTORY_NOT_CONNECTED]());return st.store.select(t)}(u))}},o))}},t.Selector=function(t){return function(e,n,r){if(!r||null===r.value)throw new Error(K[z.SELECTOR_DECORATOR]());var o=r.value,i=null,a={configurable:!0,get:function(){return i=i||it(t,o,{containerClass:e,selectorName:n.toString(),getSelectorOptions:function(){return{}}})}};return a.originalFn=o,a}},t.SelectorOptions=function(t){return function(e,n,r){if(n){var o=r.value||r.originalFn;o&&ot.defineOptions(o,t)}else ot.defineOptions(e,t)}},t.State=function(t){return function(e){var n=e,r=m(n),o=Object.getPrototypeOf(n),i=function(e){var n=e[O]||{};return s({},n,t)}(o);!function(t){var e=t.meta,n=t.inheritedStateClass,r=t.optionsWithInheritance,o=r.children,i=r.defaults,a=r.name;if(et.checkCorrectStateName(a),n.hasOwnProperty(v)){var u=n[v]||{};e.actions=s({},e.actions,u.actions)}e.children=o,e.defaults=i,e.name=a}({meta:r,inheritedStateClass:o,optionsWithInheritance:i}),n[O]=i}},t.StateStream=Z,t.Store=ut,t.UpdateState=pt,t.actionMatcher=function(t){var e=x(t);return function(t){return e===x(t)}},t.createSelector=it,t.ensureSelectorMetadata=b,t.ensureStoreMetadata=m,t.getActionTypeFromInstance=x,t.getSelectorMetadata=C,t.getStoreMetadata=A,t.getValue=M,t.ofAction=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return w(t)},t.ofActionCanceled=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return w(t,["CANCELED"])},t.ofActionCompleted=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return w(t,["SUCCESSFUL","CANCELED","ERRORED"],D)},t.ofActionDispatched=j,t.ofActionErrored=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return w(t,["ERRORED"])},t.ofActionSuccessful=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return w(t,["SUCCESSFUL"])},t.setValue=P,t.ɵa=B,t.ɵb=V,t.ɵe=h,t.ɵf=y,t.ɵg=g,t.ɵh=S,t.ɵi=_,t.ɵj=E,t.ɵk=T,t.ɵl=ft,t.ɵm=nt,t.ɵn=X,t.ɵo=q,t.ɵp=tt,t.ɵq=$,t.ɵr=Y,t.ɵs=k,t.ɵt=J,t.ɵu=W,t.ɵv=st,t.ɵw=rt,t.ɵx=lt,t.ɵy=l,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=ngxs-store.umd.min.js.map